<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Author Flight - Real-time Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif; }
    </style>
</head>
<body class="bg-[#0f172a] text-white min-h-screen">

    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-4">
            <div>
                <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-emerald-400">
                    Author Flight Dashboard
                </h1>
                <p id="update-time" class="text-gray-400 text-sm mt-1">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î...</p>
            </div>
            <div class="flex gap-2">
                <span class="px-3 py-1 bg-emerald-500/20 text-emerald-400 rounded-full text-xs border border-emerald-500/30">‚óè Live Auto-update</span>
            </div>
        </div>

        <div class="mb-10">
            <h2 class="text-xl font-semibold mb-4 text-blue-300">üìà ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢ (ReadAWrite)</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div class="bg-[#1e293b] p-6 rounded-2xl border border-gray-700 shadow-xl">
                    <p class="text-gray-400 text-sm">‡∏¢‡∏≠‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                    <p id="novel-views" class="text-3xl font-bold text-white mt-1">--</p>
                </div>
                <div class="bg-[#1e293b] p-6 rounded-2xl border border-gray-700 shadow-xl">
                    <p class="text-gray-400 text-sm">‡∏´‡∏±‡∏ß‡πÉ‡∏à</p>
                    <p id="novel-hearts" class="text-3xl font-bold text-pink-500 mt-1">--</p>
                </div>
                <div class="bg-[#1e293b] p-6 rounded-2xl border border-gray-700 shadow-xl">
                    <p class="text-gray-400 text-sm">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô</p>
                    <p id="novel-comments" class="text-3xl font-bold text-blue-400 mt-1">--</p>
                </div>
                <div class="bg-[#1e293b] p-6 rounded-2xl border border-gray-700 shadow-xl">
                    <p class="text-gray-400 text-sm">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏±‡πâ‡∏ô</p>
                    <p id="novel-shelf" class="text-3xl font-bold text-emerald-400 mt-1">--</p>
                </div>
            </div>
            <div class="mt-4 p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl">
                <p class="text-sm text-blue-200">‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á: <span id="novel-title" class="font-semibold text-white">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span></p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-1 space-y-4">
                <h2 class="text-xl font-semibold text-blue-300">üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏•‡∏≤‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h2>
                <div class="bg-[#1e293b] p-5 rounded-2xl border border-gray-700">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Bitcoin (BTC)</span>
                        <span id="price-btc" class="text-xl font-bold text-orange-400">--</span>
                    </div>
                </div>
                <div class="bg-[#1e293b] p-5 rounded-2xl border border-gray-700">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Ethereum (ETH)</span>
                        <span id="price-eth" class="text-xl font-bold text-purple-400">--</span>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-2 bg-[#1e293b] p-6 rounded-2xl border border-gray-700">
                <h2 class="text-xl font-semibold mb-6">Market Overview</h2>
                <canvas id="marketChart" height="150"></canvas>
            </div>
        </div>
    </div>

    <script>
        async function updateDashboard() {
            try {
                // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå JSON ‡∏ó‡∏µ‡πà Scraper ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏¥‡πâ‡∏á‡πÑ‡∏ß‡πâ
                const response = await fetch('dashboard_stats.json');
                if (!response.ok) throw new Error('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
                const data = await response.json();

                // 1. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢
                document.getElementById('novel-title').innerText = data.novel_stats.title;
                document.getElementById('novel-views').innerText = data.novel_stats.views;
                document.getElementById('novel-hearts').innerText = data.novel_stats.hearts;
                document.getElementById('novel-comments').innerText = data.novel_stats.comments;
                document.getElementById('novel-shelf').innerText = data.novel_stats.shelf;

                // 2. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏•‡∏≤‡∏î
                document.getElementById('price-btc').innerText = `$${data.market['BTC-USD'].toLocaleString()}`;
                document.getElementById('price-eth').innerText = `$${data.market['ETH-USD'].toLocaleString()}`;
                
                // 3. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤
                document.getElementById('update-time').innerText = `‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${data.last_updated}`;

                // 4. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü
                const ctx = document.getElementById('marketChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: Object.keys(data.market),
                        datasets: [{
                            label: 'Current Price (USD)',
                            data: Object.values(data.market),
                            backgroundColor: ['#f59e0b', '#a855f7'],
                            borderRadius: 10
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: { legend: { display: false } },
                        scales: { 
                            y: { grid: { color: '#334155' }, ticks: { color: '#94a3b8' } },
                            x: { ticks: { color: '#94a3b8' } }
                        }
                    }
                });

            } catch (error) {
                console.error("Dashboard Error:", error);
                document.getElementById('update-time').innerText = "‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏à‡∏≤‡∏Å GitHub Actions...";
            }
        }

        updateDashboard();
        // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏ó‡∏∏‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
        setInterval(updateDashboard, 300000);
    </script>
</body>
</html>